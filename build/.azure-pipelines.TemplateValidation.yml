jobs:
- job: Packages_Validation

  pool:
    vmImage: 'windows-2022'

  variables:
    - name: UseDotNetNativeToolchain
      value: false

  steps:
  - template: templates/package-validation.yml
    parameters:
        templateArgs: ''
        projectName: 'DefaultArguments'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-preset blank'
        projectName: 'Blank'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-platforms gtk wpf linux-fb'
        projectName: 'SkiaOnlyHeads'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-platforms android ios maccatalyst'
        projectName: 'MobileOnlyHeads'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-preset blank -markup csharp'
        projectName: 'BlankMarkup'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-preset blank --cpm false'
        projectName: 'BlankNoCpm'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-presentation mvvm'
        projectName: 'MVVM'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '--cpm false'
        projectName: 'NoCentralPackageManagement'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-markup csharp'
        projectName: 'CSharpMarkup'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-di false'
        projectName: 'NoHosting'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-config false -loc false -http false -log none --navigation blank'
        projectName: 'HostingOnly'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-config false'
        projectName: 'NoConfiguration'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-loc false'
        projectName: 'NoLocalization'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-http false'
        projectName: 'NoHttp'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-log default'
        projectName: 'NoSerilog'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-server false'
        projectName: 'NoServer'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-server false -http false'
        projectName: 'NoServerNoHttp'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-tests none'
        projectName: 'NoTests'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '--navigation blank'
        projectName: 'FrameNavigation'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-tfm net8.0'
        projectName: 'Net8'
      # https://github.com/unoplatform/uno.templates/issues/22
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-preset blank -tfm net7.0 -platforms android -platforms ios -platforms maccatalyst -platforms macos -platforms windows -platforms wasm -platforms gtk -platforms wpf -platforms linux-fb -presentation mvvm -server false -tests none -vscode false -pwa false -di true -nav regions -log none -theme material'
        projectName: 'Issue22'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-preset=recommended -auth=custom'
        projectName: 'CustomAuthMvux'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-preset=recommended -presentation mvvm -auth=custom'
        projectName: 'CustomAuthMvvm'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-preset=recommended -auth=web'
        projectName: 'WebAuthMvux'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-preset=recommended -presentation mvvm -auth=web'
        projectName: 'WebAuthMvvm'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-preset=recommended -auth=oidc'
        projectName: 'OidcAuthMvux'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-preset=recommended -presentation mvvm -auth=oidc'
        projectName: 'OidcAuthMvvm'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-preset=recommended -auth=msal'
        projectName: 'MsalAuthMvux'
  - template: templates/package-validation.yml
    parameters:
        templateArgs: '-preset=recommended -presentation mvvm -auth=msal'
        projectName: 'MsalAuthMvvm'
  - template: templates/package-validation.yml
    parameters:
       templateArgs: '-preset=blank -maui'
       projectName: 'MauiBlank'
  - template: templates/package-validation.yml
    parameters:
       templateArgs: '-preset=recommended -maui'
       projectName: 'MauiRecommended'
  - template: templates/package-validation.yml
    parameters:
       templateArgs: '-preset=recommended -maui -tfm net8.0'
       projectName: 'MauiRecommendedNet8'
